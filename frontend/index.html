<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Comment</title>
</head>
<body>
    <form id="comment_form">
        <h2>Please give your valuable comment</h2>
     <input type="text" placeholder="Comment" id="comnt">
     <input type="submit" value="Submit" id="asubmit">
     <!-- <input type="number" placeholder="Comment Id" id="cid">
     <input type="text" placeholder="Replay" id="repl">
     <input type="submit" value="Replay" id="areplay"> -->
    </form>
<!-- ************************************************************************** -->
    <script>
        let commentform = document.getElementById('comment_form')
// if(commentform.comnt.value!==""){
        commentform.addEventListener('submit',function(e){
            e.preventDefault()

            let comment = commentform.comnt.value

            CommentFun(comment) 
        })

        async function CommentFun(comment){

            try{
                let Comment_Add_Data = await fetch("http://localhost:8088/commentController/addComment",
                {
                    method:"POST",
                    body:JSON.stringify({
                        "comment":comment,
                        "commentId":0
                    }),
                    headers:{
                        "Content-Type":"application/json"
                    }
                })

                console.log(Comment_Add_Data)

                if(Comment_Add_Data.ok){
                    let Response_Data = await Comment_Add_Data.json();

                    console.log(Response_Data)

                    alert("comment added in successfully!!")

                }else{
                    
                        let Response_Data = await Comment_Add_Data.json();
                        let error=JSON.stringify(Response_Data)
                        let msg =JSON.parse(error);
                        console.log(error.message)
                        alert(msg["message"])

                }
                }catch(error){
                return "Not sucessful"
                }
         
           }
        // }
        // else{


        //     commentform.addEventListener('submit',function(e){
        //     e.preventDefault()

        //     let replay = commentform.repl.value

        //     CommentFun(replay) 
        // })

        // async function CommentFun(replay){

        //     try{
        //         let Comment_Add_Data = await fetch(`http://localhost:8088/commentController/addreplay?commentid=${commentform.cid.value}`,
        //         {
        //             method:"PUT",
        //             body:JSON.stringify({
        //                 "comment":comment,
        //                 "commentId":0
        //             }),
        //             headers:{
        //                 "Content-Type":"application/json"
        //             }
        //         })

        //         console.log(Comment_Add_Data)

        //         if(Comment_Add_Data.ok){
        //             let Response_Data = await Comment_Add_Data.json();

        //             console.log(Response_Data)

        //             alert("comment added in successfully!!")

        //         }else{
                    
        //                 let Response_Data = await Comment_Add_Data.json();
        //                 let error=JSON.stringify(Response_Data)
        //                 let msg =JSON.parse(error);
        //                 console.log(error.message)
        //                 alert(msg["message"])

        //         }
        //         }catch(error){
        //         return "Not sucessful"
        //         }
         
        //    }
        // }
    </script>

<form id="comment_by_id">
    <h2>Get comment by comment id</h2>
 <input type="number" placeholder="Comment id" id="cid">
 <input type="submit" value="Submit" id="acid">
</form>
<h1 id="cmd"></h1>
<h1 id="uvt"></h1>
<h1 id="dvt"></h1>
<script>
    let get_comment = document.getElementById('comment_by_id')
    get_comment.addEventListener('submit',function(e){
        e.preventDefault()

        let commentid = get_comment.cid.value

        CommentFun(commentid) 
    })

    async function CommentFun(commentid){

        try{
            let get_comment_Data = await fetch(`http://localhost:8088/commentController/getcomment?commentid=${commentid}`,
            {
                method:"GET",
                headers:{
                    "Content-Type":"application/json"
                }
            })

            console.log(get_comment_Data)

            if(get_comment_Data.ok){
                let Response_Data = await get_comment_Data.json();
                let x = Response_Data.comment
               
                console.log(x)
                document.getElementById('cmd').innerText=x
                document.getElementById('uvt').innerText=Response_Data.Upvotes
                document.getElementById('dvt').innerText=Response_Data.Downvotes

            }else{
                
                    let Response_Data = await get_comment_Data.json();
                    let error=JSON.stringify(Response_Data)
                    let msg =JSON.parse(error);
                    console.log(error.message)
                    alert(msg["message"])

            }
            }catch(error){
            return "Not sucessful"
            }
     
       }
       

</script>

<!-- <form id="Upvotes_by_id">
    <h2>Add Upvotes by comment id</h2>
 <input type="number" placeholder="Comment id" id="cid">
 <input type="submit" value="Submit" id="ccid">
</form>
<h1 id="cmd"></h1>
<h1 id="uvt"></h1>
<h1 id="dvt"></h1>
<script>
    let upvote_comment = document.getElementById('Upvotes_by_id')
    get_comment.addEventListener('submit',function(e){
        e.preventDefault()

        let commentid = get_comment.cid.value

        CommentFun(commentid) 
    })

    async function CommentFun(commentid){

        try{
            let get_comment_Data = await fetch(`http://localhost:8088/commentController/giveUpvote?commentid=${commentid}`,
            {
                method:"PUT",
                headers:{
                    "Content-Type":"application/json"
                }
            })

            console.log(get_comment_Data)

            if(get_comment_Data.ok){
                let Response_Data = await get_comment_Data.json();
                let x = Response_Data.comment
               
                console.log(x)
                document.getElementById('cmd').innerText=x
                document.getElementById('uvt').innerText=Response_Data.Upvotes
                document.getElementById('dvt').innerText=Response_Data.Downvotes

            }else{
                
                    let Response_Data = await get_comment_Data.json();
                    let error=JSON.stringify(Response_Data)
                    let msg =JSON.parse(error);
                    console.log(error.message)
                    alert(msg["message"])

            }
            }catch(error){
            return "Not sucessful"
            }
     
       }
       

</script> -->

</body>
</html>